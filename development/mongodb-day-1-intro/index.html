<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>MongoDB Day 1 (Intro) &#8211; Technical Musing of a Mummy</title>
<meta name="description" content="Introduction to MongoDB">
<meta name="keywords" content="seven databases in seven weeks, nosql, data, mongodb">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://heatherjcampbell.com/images/">
<meta name="twitter:title" content="MongoDB Day 1 (Intro)">
<meta name="twitter:description" content="Introduction to MongoDB">
<meta name="twitter:creator" content="@hcampbell07">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="MongoDB Day 1 (Intro)">
<meta property="og:description" content="Introduction to MongoDB">
<meta property="og:url" content="http://heatherjcampbell.com/development/mongodb-day-1-intro/">
<meta property="og:site_name" content="Technical Musing of a Mummy">





<link rel="canonical" href="http://heatherjcampbell.com/development/mongodb-day-1-intro/">
<link href="http://heatherjcampbell.com/feed.xml" type="application/atom+xml" rel="alternate" title="Technical Musing of a Mummy Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://heatherjcampbell.com/assets/css/main.min.css">
<link rel="stylesheet" href="http://heatherjcampbell.com/assets/css/code.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://heatherjcampbell.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://heatherjcampbell.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://heatherjcampbell.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://heatherjcampbell.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://heatherjcampbell.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://heatherjcampbell.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://heatherjcampbell.com/images/apple-touch-icon-144x144-precomposed.png">
</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav">
	    <ul>
	        
			<li>
				
					<a href="http://heatherjcampbell.com/about/">About</a>
				 
			</li>
	        
			<li>
				
					<a href="http://heatherjcampbell.com/articles/">Posts</a>
				 
			</li>
	        
			<li>
				
					<a href="http://heatherjcampbell.com/tags/">Tags</a>
				 
			</li>
	        
			<li>
				
					<a href="https://twitter.com/HCampbell07/">Tweets</a>
				 
			</li>
	        
			<li>
				
					<a href="http://heatherjcampbell.com/presentations/">Presentations</a>
				 
			</li>
	        
			<li>
				
					<a href="http://heatherjcampbell.com/reading/">Reading List</a>
				 
			</li>
	        
	        <li><a href="http://heatherjcampbell.com/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Search...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        <h1 class="site-title"><a href="http://heatherjcampbell.com">Technical Musing of a Mummy</a></h1>
		<h2 class="site-description" itemprop="description">A Blog About All Things IT Related</h2>
	</div>
</header><!-- /.masthead -->

<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://heatherjcampbell.com/tags/#seven databases in seven weeks" title="Pages tagged seven databases in seven weeks">seven databases in seven weeks</a>&nbsp;&bull;&nbsp;<a href="http://heatherjcampbell.com/tags/#nosql" title="Pages tagged nosql">nosql</a>&nbsp;&bull;&nbsp;<a href="http://heatherjcampbell.com/tags/#data" title="Pages tagged data">data</a>&nbsp;&bull;&nbsp;<a href="http://heatherjcampbell.com/tags/#mongodb" title="Pages tagged mongodb">mongodb</a></span>
        
          <h1 class="entry-title">MongoDB Day 1 (Intro)</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="http://heatherjcampbell.com/images/bio-photo.JPG" alt="Heather Campbell photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="http://heatherjcampbell.com/about/" title="About Heather Campbell">Heather Campbell</a></span></span>
        <span class="entry-date date published"><time datetime="2013-01-30T00:00:00+00:00"><i class="icon-calendar-empty"></i> January 30, 2013</time></span>
        
        
        <span><a href="http://heatherjcampbell.com/development/mongodb-day-1-intro/" rel="bookmark" title="MongoDB Day 1 (Intro)"><i class="icon-link"></i> Permalink</a></span>
        
        <span class="social-share-facebook">
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://heatherjcampbell.com/development/mongodb-day-1-intro/" title="Share on Facebook" itemprop="Facebook"><i class="icon-facebook-sign"></i> Like</a></span>
        <span class="social-share-twitter">
            <a href="https://twitter.com/intent/tweet?hashtags=development&text=MongoDB Day 1 (Intro)&url=http://heatherjcampbell.com/development/mongodb-day-1-intro/&via=hcampbell07" title="Share on Twitter" itemprop="Twitter"><i class="icon-twitter-sign"></i> Tweet</a></span>
        <span class="social-share-googleplus">
            <a href="https://plus.google.com/share?url=http://heatherjcampbell.com/development/mongodb-day-1-intro/" title="Share on Google Plus" itemprop="GooglePlus"><i class="icon-google-plus-sign"></i> +1</a></span>
            <!-- /.social-share -->
      </footer>
      <div class="entry-content">
        <p><em>My experience of Day 1 with <a href="http://www.mongodb.org/">MongoDB</a> in <a href="http://pragprog.com/book/rwdata/seven-databases-in-seven-weeks">Seven Databases In Seven Weeks</a>.</em></p>

<p>As I mentioned in a previous post I’m currently working through <a href="http://www.10gen.com/">10gen’s</a> DBA and Developer courses for MongoDB along with the book <a href="http://pragprog.com/book/rwdata/seven-databases-in-seven-weeks">Seven Databases In Seven Weeks</a>. This post is a quick intro to MongoDB, giving you some background on the type of database it is, explaining how to get it installed and looking at the format of the documents stored in it.</p>

<p>MongoDB is a <a href="http://www.json.org/">JSON</a> document db, where documents are stored in a binary form of JSON, BSON.
JSON is a format built on two structures.</p>

<ol>
  <li>A collection of name/value pairs</li>
  <li>An ordered list of values in an array like format.</li>
</ol>

<p>Below is an example of a MongoDB document. You can see the collection is held in {}. The tags and comments values are arrays. tags is an array of strings while comments is an array of documents. This demonstrates an important feature of MongoDB, it supports hierarchy. You can have documents nested within your documents. This is something you can’t achieve in a relational database.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">blog.json</span><a class="code-highlight-caption-link" href="https://gist.github.com/5322470">link</a></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">name</span> <span class="err">:</span> <span class="nt">&quot;Heather Campbell&quot;</span><span class="p">,</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">title:</span> <span class="nt">&quot;Getting Started with MongoDB&quot;</span><span class="p">,</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">created</span> <span class="err">:</span> <span class="nt">&quot;Thu Sep 20 2007 00:00:00 GMT -0700 (PDT)&quot;</span><span class="p">,</span>
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">content</span> <span class="err">:</span> <span class="nt">&quot;blah mongodb blah&quot;</span><span class="p">,</span>
</div></div><div data-line="6" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">tags</span> <span class="err">:</span> <span class="err">[</span><span class="nt">&quot;mongodb&quot;</span><span class="p">,</span> <span class="nt">&quot;nosql&quot;</span><span class="p">,</span> <span class="nt">&quot;databases&quot;</span><span class="p">,</span> <span class="nt">&quot;data&quot;</span><span class="err">]</span><span class="p">,</span>
</div></div><div data-line="7" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">comments</span> <span class="err">:</span> <span class="err">[</span>
</div></div><div data-line="8" class="code-highlight-row numbered"><div class="code-highlight-line">                <span class="err">&#x7b;</span> 
</div></div><div data-line="9" class="code-highlight-row numbered"><div class="code-highlight-line">                  <span class="err">name:</span> <span class="nt">&quot;Jack Black&quot;</span><span class="p">,</span> 
</div></div><div data-line="10" class="code-highlight-row numbered"><div class="code-highlight-line">                  <span class="err">posted:</span> <span class="nt">&quot;Sat Sep 22 2007 00:00:00 GMT -0700&quot;</span>
</div></div><div data-line="11" class="code-highlight-row numbered"><div class="code-highlight-line">                  <span class="err">text</span><span class="p">:</span> <span class="s2">&quot;Good Intro&quot;</span>
</div></div><div data-line="12" class="code-highlight-row numbered"><div class="code-highlight-line">                <span class="p">&#x7d;</span><span class="err">,</span>
</div></div><div data-line="13" class="code-highlight-row numbered"><div class="code-highlight-line">                <span class="p">&#x7b;</span> 
</div></div><div data-line="14" class="code-highlight-row numbered"><div class="code-highlight-line">                  <span class="err">name:</span> <span class="nt">&quot;Paula Mills&quot;</span><span class="p">,</span> 
</div></div><div data-line="15" class="code-highlight-row numbered"><div class="code-highlight-line">                  <span class="err">posted:</span> <span class="nt">&quot;Mon Sep 24 2007 00:00:00 GMT -0700&quot;</span>
</div></div><div data-line="16" class="code-highlight-row numbered"><div class="code-highlight-line">                  <span class="err">text</span><span class="p">:</span> <span class="s2">&quot;Thanks for posting this&quot;</span>
</div></div><div data-line="17" class="code-highlight-row numbered"><div class="code-highlight-line">                <span class="p">&#x7d;</span>
</div></div><div data-line="18" class="code-highlight-row numbered"><div class="code-highlight-line">                <span class="err">]</span>
</div></div><div data-line="19" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="err">&#x7d;</span></div></div></pre></div></figure>

<p>One of the issues people often talk about with Relational Databases is the mismatch between how the database and their code represents data. Hence the need for ORM tools like Hibernate and iBatis and the Java Persistence API. With MongoDB you’ll notice a more similar feel to how you represent data in the database to your code. The collection of name/value pairs it like a class and it’s properties. The ordered list of values feels like an array.</p>

<p>Documents with a similar purpose are grouped into a collection. Which if you are coming from a relational background is a bit like a table except that the documents in the collection can vary in structure. This is because MongoDB is schemaless. With a relational database you would define a schema upfront before inserting records by creating tables and constraints. With MongoDB you just insert your documents into a collection and there are no checks for a particular set of fields. For example the three documents below could all be added to the database as part of the same collection even though they have different fields.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">people.json</span><a class="code-highlight-caption-link" href="https://gist.github.com/5322470">link</a></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">name</span> <span class="err">:</span> <span class="nt">&quot;John Black&quot;</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="6" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7b;</span>
</div></div><div data-line="7" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">name</span> <span class="err">:</span> <span class="nt">&quot;Kate Reynolds&quot;</span><span class="p">,</span>
</div></div><div data-line="8" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">age</span>  <span class="err">:</span> <span class="err">35</span> 
</div></div><div data-line="9" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="10" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="11" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7b;</span>
</div></div><div data-line="12" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">name</span> <span class="err">:</span> <span class="nt">&quot;Jane Scott&quot;</span><span class="p">,</span>
</div></div><div data-line="13" class="code-highlight-row numbered"><div class="code-highlight-line">   <span class="err">profession</span> <span class="err">:</span> <span class="nt">&quot;programmer&quot;</span> 
</div></div><div data-line="14" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7d;</span></div></div></pre></div></figure>

<p>Although there is no explicit schema when you write code to interact with your database it needs to be aware of the structure of the data so it knows what fields to query in other words there is still an implicit schema. The flexibility of this approach is in keeping with the increase in popularity of dynamic languages and an agile approach to development.</p>

<p>MongoDB supports the concept of indexes. When you insert a document it generates a field called <code>_id</code> which acts like the primary key of the document and is unique.You can also define your own indexes on a field or multiple fields of a particular collection of documents.</p>

<p>If you’ve worked with a relational database you’re probably used to writing queries with joins between tables to pull back the information you require. MongoDB doesn’t support joins. In some cases this will mean information is stored multiple times against different documents. Generally if you want to normalise the data and keep it in it’s own separate document you can get round the lack of joins by storing it’s unique <code>_id</code> field as a field of the documents which are associated with it.</p>

<p>E.g. in the example below you could retrieve the person record and then using the value stored in the country field do a second query to retrieve the country record.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">insert.js</span><a class="code-highlight-caption-link" href="https://gist.github.com/5322470">link</a></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nx">db</span><span class="p">.</span><span class="nx">countries</span><span class="p">.</span><span class="nx">insert</span><span class="p">(&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="s2">&quot;_id&quot;</span><span class="o">:</span> <span class="s2">&quot;FR&quot;</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;France&quot;</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7d;)</span>
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="6" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nx">db</span><span class="p">.</span><span class="nx">people</span><span class="p">.</span><span class="nx">insert</span><span class="p">(&#x7b;</span>
</div></div><div data-line="7" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Jean Pierre&quot;</span>
</div></div><div data-line="8" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;FR&quot;</span>
</div></div><div data-line="9" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7d;)</span></div></div></pre></div></figure>

<p>In general this approach should be sufficient but where you want to embed documents from multiple collections in documents from one collection there are DBRefs. More information about them can be found <a href="http://docs.mongodb.org/manual/applications/database-references">here</a>.</p>

<p>MongoDB doesn’t have the idea of a transaction which allows you to update multiple documents in an atomic fashion. Generally this isn’t an issue as unlike a relational database where data is often held across multiple tables in MongoDB it is normally held within one document. The update of a single document is atomic. If you need to update multiple documents take a look at the two phase commit pattern described <a href="http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits">here</a> which uses a transaction collection to replicate the behaviour of a transaction in the relational sense.</p>

<p>Full instructions for getting MongoDB set up can be found <a href="http://docs.mongodb.org/manual/installation">here</a>. I’ve been working in a Windows environment, running it manually.</p>

<p>That was a very quick high level introduction to the database. In my next post I’m going to cover CRUD in MongoDB.</p>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://heatherjcampbell.com/development/mongodb-day-1-crud-part-1-create/" class="btn" title="MongoDB Day 1 (CRUD Part 1: Create)">Previous article</a>
      
      
        <a href="http://heatherjcampbell.com/development/mongodb-day-1-crud-part-2-read/" class="btn" title="MongoDB Day 1 (CRUD Part 2: Read)">Next article</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Heather Campbell. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/hcampbell07" title="Heather Campbell on Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
	
	
	
	
	
	
	<a href="http://github.com/heatherjc07" title="Heather Campbell on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://heatherjcampbell.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://heatherjcampbell.com/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'http://heatherjcampbell.com/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-69172837-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>	        

</body>
</html>
